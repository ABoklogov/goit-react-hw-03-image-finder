{"version":3,"sources":["components/App/App.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css","components/ImageErrorView/ImageErrorView.module.css","components/Button/Button.module.css","components/Searchbar/SearchForm/SearchForm.js","components/Searchbar/Searchbar.js","services/image-api.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","images/error-image.jpg","components/ImageErrorView/ImageErrorView.js","components/Button/Button.js","components/Modal/Modal.js","components/App/App.js","index.js","components/Searchbar/SearchForm/SearchForm.module.css"],"names":["module","exports","SearchForm","onSubmit","value","onChange","className","s","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","Searchbar","state","imageName","handleNameChange","e","setState","currentTarget","toLowerCase","handleSubmit","preventDefault","props","trim","toast","error","this","Component","apiOptions","fetchImage","name","page","a","fetch","response","json","images","propTypes","PropTypes","string","isRequired","number","ImageGalleryItem","smallImage","bigImage","alt","openModal","ImageGalleryItemImage","onClick","src","ImageGallery","map","el","webformatURL","largeImageURL","tags","id","ImageErrorView","message","role","errorImage","width","height","Button","loadMoreImages","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","Status","dataModal","url","App","showModal","status","loaderImages","then","comeImages","total","hits","scrollTo","top","documentElement","scrollHeight","behavior","Promise","reject","Error","catch","handleFormSubmit","toggleModal","urlImage","prevProps","prevState","prevName","nextName","Loader","color","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bb30268c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__hV-nI\",\"Loader\":\"App_Loader__40vkX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2_bzN\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2VPfR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1lVTk\",\"Modal\":\"Modal_Modal__2yrXR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2fPgl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1SxoJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorImage\":\"ImageErrorView_errorImage__1JLtF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__NmB_X\"};","import PropTypes from 'prop-types';\nimport s from './SearchForm.module.css';\n\nexport default function SearchForm({ onSubmit, value, onChange }) {\n  return (\n    <form className={s.SearchForm} onSubmit={onSubmit}>\n      <button type=\"submit\" className={s.SearchFormButton}>\n        <span className={s.SearchFormButtonLabel}>Search</span>\n      </button>\n\n      <input\n        className={s.SearchFormInput}\n        type=\"text\"\n        autoComplete=\"off\"\n        autoFocus\n        value={value}\n        placeholder=\"Search images and photos\"\n        onChange={onChange}\n      />\n    </form>\n  );\n}\n\nSearchForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\nimport SearchForm from './SearchForm';\n\nclass Searchbar extends Component {\n  state = {\n    imageName: '',\n  };\n\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  handleNameChange = e => {\n    this.setState({ imageName: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { imageName } = this.state;\n    const { onSubmit } = this.props;\n\n    if (imageName.trim() === '') {\n      toast.error('Please enter the name of the picture');\n      return;\n    }\n\n    onSubmit(imageName);\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    const { imageName } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <SearchForm\n          onSubmit={this.handleSubmit}\n          value={imageName}\n          onChange={this.handleNameChange}\n        />\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\n\nconst apiOptions = {\n  API_KEY: '22144472-c4d53a495baf7d3490978ff95',\n  BASE_URL: 'https://pixabay.com/api/',\n  PER_PAGE: 12,\n};\n\nasync function fetchImage(name, page) {\n  const response = await fetch(\n    `${apiOptions.BASE_URL}?q=${name}&page=${page}&key=${apiOptions.API_KEY}&image_type=photo&orientation=horizontal&per_page=${apiOptions.PER_PAGE}`,\n  );\n  const images = await response.json();\n  return images;\n}\n\nfetchImage.propTypes = {\n  name: PropTypes.string.isRequired,\n  page: PropTypes.number.isRequired,\n};\n\nexport { fetchImage, apiOptions };\n","import s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  smallImage,\n  bigImage,\n  alt,\n  openModal,\n}) {\n  const onOpenModalClick = () => {\n    openModal(bigImage, alt);\n  };\n\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        className={s.ImageGalleryItemImage}\n        onClick={onOpenModalClick}\n        src={smallImage}\n        alt={alt}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  smallImage: PropTypes.string.isRequired,\n  bigImage: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  openModal: PropTypes.func,\n};\n","import s from './ImageGallery.module.css';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGallery({ images, openModal }) {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(el => (\n        <ImageGalleryItem\n          key={el.id}\n          smallImage={el.webformatURL}\n          openModal={openModal}\n          bigImage={el.largeImageURL}\n          alt={el.tags}\n        />\n      ))}\n    </ul>\n  );\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape),\n  openModal: PropTypes.func,\n};\n","export default __webpack_public_path__ + \"static/media/error-image.66517862.jpg\";","import errorImage from '../../images/error-image.jpg';\nimport s from './ImageErrorView.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function ImageErrorView({ message }) {\n  return (\n    <div role=\"alert\" className={s.errorImage}>\n      <img src={errorImage} width=\"240\" height=\"240\" alt=\"errorImage\" />\n      <p>{message}</p>\n    </div>\n  );\n}\n\nImageErrorView.propTypes = {\n  message: PropTypes.string,\n};\n","import s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ loadMoreImages }) {\n  return (\n    <button className={s.Button} type=\"button\" onClick={loadMoreImages}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  loadMoreImages: PropTypes.func,\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    bigImage: PropTypes.string.isRequired,\n    alt: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { alt, bigImage } = this.props;\n\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={bigImage} alt={alt} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component, Fragment } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Loader from 'react-loader-spinner';\nimport s from './App.module.css';\nimport Searchbar from '../Searchbar';\nimport { fetchImage, apiOptions } from '../../services/image-api';\nimport ImageGallery from '../ImageGallery';\nimport ImageErrorView from '../ImageErrorView';\nimport Button from '../Button';\nimport Modal from '../Modal';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nconst dataModal = {\n  url: '',\n  alt: '',\n};\n\nclass App extends Component {\n  state = {\n    imageName: '',\n    images: [],\n    page: 1,\n    error: null,\n    showModal: false,\n    status: Status.IDLE,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevState.imageName;\n    const nextName = this.state.imageName;\n\n    if (prevName !== nextName) {\n      this.setState({\n        page: 1,\n        images: [],\n        status: Status.PENDING,\n      });\n\n      this.loaderImages(nextName);\n    }\n  }\n\n  loaderImages = (name, page = 1) => {\n    this.setState({ status: Status.PENDING });\n\n    fetchImage(name, page)\n      .then(comeImages => {\n        if (comeImages.total !== 0) {\n          this.setState(({ images, page }) => ({\n            images: [...images, ...comeImages.hits],\n            page: page + 1,\n            status: Status.RESOLVED,\n          }));\n\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n          return;\n        }\n\n        return Promise.reject(new Error(`Нет такого изображения: ${name}`));\n      })\n      .catch(error =>\n        this.setState({\n          error,\n          status: Status.REJECTED,\n        }),\n      );\n  };\n\n  handleFormSubmit = imageName => {\n    this.setState({ imageName });\n  };\n\n  toggleModal = (urlImage, alt) => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n    dataModal.url = urlImage;\n    dataModal.alt = alt;\n  };\n\n  render() {\n    const { images, error, status, page, imageName, showModal } = this.state;\n\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n\n        {status === 'pending' && (\n          <Fragment>\n            {images && (\n              <ImageGallery images={images} openModal={this.toggleModal} />\n            )}\n            <Loader\n              className={s.Loader}\n              type=\"ThreeDots\"\n              color=\"#00BFFF\"\n              height={100}\n              width={100}\n            />\n          </Fragment>\n        )}\n\n        {status === 'resolved' && (\n          <Fragment>\n            <ImageGallery images={images} openModal={this.toggleModal} />\n            {images.length >= apiOptions.PER_PAGE && (\n              <Button\n                loadMoreImages={() => this.loaderImages(imageName, page)}\n              />\n            )}\n          </Fragment>\n        )}\n\n        {status === 'rejected' && <ImageErrorView message={error.message} />}\n\n        {showModal && (\n          <Modal\n            bigImage={dataModal.url}\n            alt={dataModal.alt}\n            onClose={this.toggleModal}\n          />\n        )}\n\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"SearchForm_SearchForm__3zm0R\",\"SearchFormButton\":\"SearchForm_SearchFormButton__2Cwce\",\"SearchFormButtonLabel\":\"SearchForm_SearchFormButtonLabel__92ujl\",\"SearchFormInput\":\"SearchForm_SearchFormInput__4SxNC\"};"],"sourceRoot":""}